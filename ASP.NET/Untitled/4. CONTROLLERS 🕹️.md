### 4.1 Fundamentos dos Controllers

**Teoria:**  
Controllers são classes que processam requisições HTTP e geram respostas. Eles são o "C" em MVC. Características:

- Herdam da classe Controller
- Seus métodos públicos (chamados "actions") processam requisições
- Geralmente retornam um IActionResult
- Coordenam o fluxo entre models e views

### 4.2 Tipos de Ações

**Teoria:**

- **Ações que retornam Views**: Para exibir páginas HTML
- **Ações que retornam dados**: Para APIs (JSON, XML)
- **Ações que redirecionam**: Para navegar entre páginas
- **Ações que manipulam formulários**: Para processar dados enviados

### 4.3 Passagem de Dados para Views

**Teoria:**  
Existem várias formas de passar dados do controller para a view:

1. **Modelo fortemente tipado**: Passando um objeto para a view
2. **ViewData**: Dicionário para dados temporários (usa strings como chaves)
3. **ViewBag**: Objeto dinâmico (mais conveniente que ViewData)
4. **TempData**: Persiste dados durante um redirecionamento

### 4.4 Prática: Criando Controllers e Ações

**Prática:**

1. **Criar um controller básico:**

    ```csharp
    // ProductsController.cs
    using Microsoft.AspNetCore.Mvc;
    
    namespace MeuProjeto.Controllers
    {
        public class ProductsController : Controller
        {
            public IActionResult Index()
            {
                return View(); // Retorna a view padrão (Index)
            }
            
            public IActionResult Details(int id)
            {
                return View(id); // Passa o id para a view
            }
        }
    }
    ```
    
2. **Controller com diferentes tipos de retorno:**
    
    csharpresponse-action-icon
    
    ```csharp
    public class ExamplesController : Controller
    {
        // Retorna uma view
        public IActionResult ShowView()
        {
            return View();
        }
        
        // Retorna dados JSON
        public IActionResult GetJson()
        {
            var data = new { Name = "Produto", Price = 29.99 };
            return Json(data);
        }
        
        // Retorna um redirecionamento
        public IActionResult GoToHome()
        {
            return RedirectToAction("Index", "Home");
        }
        
        // Retorna conteúdo texto
        public IActionResult GetText()
        {
            return Content("Este é um conteúdo de texto simples");
        }
    }
    ```
    
3. **Passando dados para views:**
    
    csharpresponse-action-icon
    
    ```csharp
    public class DataController : Controller
    {
        // Usando modelo
        public IActionResult WithModel()
        {
            var product = new Product { Id = 1, Name = "Laptop", Price = 1299.99M };
            return View(product);
        }
        
        // Usando ViewData
        public IActionResult WithViewData()
        {
            ViewData["Title"] = "Página com ViewData";
            ViewData["Message"] = "Esta mensagem vem do ViewData";
            ViewData["CurrentDate"] = DateTime.Now;
            
            return View();
        }
        
        // Usando ViewBag
        public IActionResult WithViewBag()
        {
            ViewBag.Title = "Página com ViewBag";
            ViewBag.Message = "Esta mensagem vem do ViewBag";
            ViewBag.CurrentDate = DateTime.Now;
            
            return View();
        }
        
        // Usando TempData (persiste durante redirecionamento)
        public IActionResult SetMessage()
        {
            TempData["Message"] = "Esta mensagem permanecerá após o redirecionamento";
            return RedirectToAction("ReadMessage");
        }
        
        public IActionResult ReadMessage()
        {
            return View();
        }
    }
    ```